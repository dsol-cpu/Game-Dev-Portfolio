<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>David Solinsky</title>
  <meta name="description" content="Portfolio of David Solinsky, Gameplay and Systems Programmer" />

  <!-- Preconnect to CDN for faster loading -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />


  <!-- CSS files -->
  <link rel="stylesheet" href="src/styles/main.css" />
  <link rel="stylesheet" href="src/styles/responsive.css" />
  <script>

    // Theme Management - Apply theme immediately to prevent flash
    (() => {
    // Function to get the theme preference
    const getThemePreference = () => {
      // First check local storage
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme) {
        return savedTheme;
      }

      // If no saved preference, check system preference
      return window.matchMedia("(prefers-color-scheme: dark)").matches
        ? "dark"
        : "light";
    };

    // Apply theme immediately to prevent flash
    document.documentElement.setAttribute("data-theme", getThemePreference());
  })();

  // Initialize everything else after DOM is loaded
  document.addEventListener("DOMContentLoaded", async function () {
    // List of icons to load
    const iconList = [
      "about.svg",
      "portfolio.svg",
      "github.svg",
      "linkedin.svg",
      "sun.svg",
      "moon.svg",
      "resume.svg",
      "space.svg",
      "shift.svg",
      "wasd.svg",
      "person.svg",
    ];

    // Create an object to store SVG data
    const svgData = {};
    const baseIconPath = "/icons/";

    // Helper function to fetch SVG content
    async function fetchSvg(path) {
      try {
        const response = await fetch(path);
        if (!response.ok) throw new Error(`Failed to load ${path}`);
        return await response.text();
      } catch (err) {
        console.error(`Error loading SVG: ${path}`, err);
        // Return a basic placeholder SVG if loading fails
        return `<svg viewBox="0 0 24 24"><rect width="24" height="24" fill="red" opacity="0.3"/><text x="12" y="12" text-anchor="middle" dominant-baseline="middle" font-size="8">Error</text></svg>`;
      }
    }

    // Load each SVG file
    for (const icon of iconList) {
      const path = baseIconPath + icon;
      svgData[path] = await fetchSvg(path);
    }

    // Initialize the sprite manager
    const spriteManager = new SvgSpriteManager({
      svgData,
      isDarkMode: document.documentElement.getAttribute("data-theme") === "dark",
    });

    // Make spriteManager available globally
    window.spriteManager = spriteManager;

    // Connect theme toggle checkbox
    const themeToggle = document.getElementById("theme-toggle");

    // Set initial checkbox state based on current theme
    const currentTheme = document.documentElement.getAttribute("data-theme");
    themeToggle.checked = currentTheme === "dark";

    // Add event listener for checkbox change
    themeToggle.addEventListener("change", function () {
      const isDark = this.checked;
      document.documentElement.setAttribute(
        "data-theme",
        isDark ? "dark" : "light"
      );
      localStorage.setItem("theme", isDark ? "dark" : "light");

      // Update sprite manager theme
      if (spriteManager && typeof spriteManager.setTheme === "function") {
        spriteManager.setTheme(isDark);
      }
    });
  });

  </script>

</head>

<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="profile">
      <img src="/images/me.png" alt="Profile" class="profile-image" width="120" height="120" loading="lazy" />
      <h2 class="profile-name">David Solinsky</h2>
      <p class="profile-title">Gameplay & Systems Programmer</p>
    </div>

    <ul class="nav-links">
      <li><a href="" class="nav-link active " data-target="about">
          <svg aria-hidden="true" class="nav-icon">
            <use href="#icon-person" />
          </svg>
          About Me
        </a></li>
      <li><a href="" class="nav-link" data-target="portfolio">
          <svg aria-hidden="true" class="nav-icon">
            <use href="#icon-portfolio" />
          </svg>
          Portfolio
        </a></li>
      <li><a href="" class="nav-link" data-target="resume">
          <svg aria-hidden="true" class="nav-icon">
            <use href="#icon-resume" />
          </svg>
          Resume
        </a></li>
    </ul>

    <div class="social-links">
      <a target="_blank" href="https://www.github.com/dsol-cpu" title="GitHub">
        <svg aria-hidden="true">
          <use href="#icon-github" />
        </svg>
      </a>
      <a target="_blank" href="https://linkedin.com/in/david-solinsky" title="LinkedIn">
        <svg aria-hidden="true">
          <use href="#icon-linkedin" />
        </svg>
      </a>
    </div>

    <div class="theme-toggle">
      <label class="theme-switch">
        <input type="checkbox" id="theme-toggle">
        <span class="slider"></span>
        <div class="theme-icons">
          <svg class="light-icon" aria-hidden="true">
            <use href="#icon-sun" />
          </svg>
          <svg class="dark-icon" aria-hidden="true">
            <use href="#icon-moon" />
          </svg>
        </div>
      </label>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- About Section -->
    <section id="about" class="active">
      <div class="about-container">
        <div class="about-text">
          <p>
            I'm a game developer.
          </p>
          <br />
          <p>
            I specialize in Unity and Unreal Engine development, with a strong
            focus on gameplay programming, procedural generation, and shader
            development. My experience includes working on indie titles as
            well as collaborating with larger studios on AAA projects.
          </p>
          <br />
          <p>
            When I'm not coding, I enjoy experimenting with 3D modeling,
            learning about game design principles, and playing games to stay
            up-to-date with industry trends and innovations.
          </p>
        </div>
    </section>

    <!-- Portfolio Section -->
    <section id="portfolio">

      <div class="filter-buttons">
        <button class="filter-button active" data-filter="all">All</button>
        <button class="filter-button" data-filter="unity">Unity</button>
        <button class="filter-button" data-filter="unreal">
          Unreal Engine
        </button>
        <button class="filter-button" data-filter="web">Web Games</button>
        <button class="filter-button" data-filter="3d">3D Modeling</button>
      </div>
      <div class="portfolio-grid"></div>
    </section>
    <section id="resume">
      
      <div class="resume-container">
        <canvas id="game-canvas"></canvas>
        <!-- <div class="download-container">
          <a href="src/assets/documents/David_Solinsky_resume.pdf" class="download-link" download>Download Resume PDF</a>
        </div> -->
        
        <!-- Primary method: iframe for PDF viewing -->
        <!-- <iframe src="src/assets/documents/David_Solinsky_resume.pdf" class="pdf-embed" title="Resume PDF"></iframe> -->
      </div>
    </section>

    <!-- Three.js Canvas -->
    <!-- <div class="canvas-container"> -->
    <!-- Game Controls Info -->
    <!-- <div class="game-controls-info">
        <ul>
          <li>
            <svg aria-hidden="true" class="nav-icon">
              <use href="#icon-wasd" />
            </svg>
            <p>WASD/Arrow Keys - Move</p>
          </li>
          <li>
            <svg aria-hidden="true" class="nav-icon">
              <use href="#icon-space" />
            </svg>
            <svg aria-hidden="true" class="nav-icon">
              <use href="#icon-shift" />
            </svg>
            <p>Space/Shift - Ascend/Descend</p>
          </li>
        </ul>
      </div>
    </div> -->
  </div>
  <script type="module" src="/src/js/three/three.core.min.js"></script>
  <script type="module" src="/src/js/three/three.module.min.js"></script>
  <script type="module" src="/src/js/three/BufferGeometryUtils.js"></script>
  <script type="module" src="/src/js/three/GLTFLoader.js"></script>
  <script type="module" src="/src/js/three/OrbitControls.js"></script>
  <script type="module" src="/src/js/svg-sprite-manager.js"></script>
  <script type="module" src="/src/js/main.js"></script>
</body>

</html>